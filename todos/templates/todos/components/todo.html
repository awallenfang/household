{% load static%}
<div class="collapsible-container draggable-container" todo-id="{{todo.id}}">
    <div class="floating-recurrent-container">
        <a class="button btn-small" 
        hx-get="{% url 'todos:recurrency_editor' todo.id %}"
        hx-target="#recurrent-block"
        hx-swap="innerHTML"
        onclick="clearSelectedUsers()">Open Editor</a>
    </div>
    <div class="todo">
        <div class="todo-header">
            <div >
                <img src="{% static 'todos/assets/drag.svg' %}" class="todo_drag_handle" draggable="false">
                <p class="todo-name">{{ todo.name }}</p>
            </div>
            <p>{{todo.assigned_user.auth_user.username}}</p>
        </div>
        <div class="todo-buttons">
            <button class="dropdown-button" onclick="toggleDropdown(event)">...</button>
        </div>
    </div>
    <div class="collapsible-content dropdown-closed">
        <div class="todo-collapsible-content">
                <div class="todo-description-container">
                    <p class="todo-description">{{todo.description}} </p>
                </div>
                <div class="todo-additional-info">
                    <a class="button btn-small" hx-post="{% url 'todos:edit_todo' todo.id %}"
                    hx-target="closest .collapsible-container"
                    hx-swap="outerHTML">Edit</a>
                    <div class="button-center-container">
                        <a class="button btn-small" 
                        hx-delete="{% url 'todos:delete_todo' todo.id %}" 
                        hx-confirm="Are you sure you would like to delete this todo?"
                        hx-target="#todo-list"
                        >
                            Delete!
                        </a>
                    </div>
                    <p>Assigned user:</p>
                    <p>{{todo.assigned_user.auth_user.username}}</p>
                </div>
        </div>
    </div>
</div>